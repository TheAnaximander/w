<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Friendship Talks</title>
    <style>
        /* CSS 样式略，保持与您之前的样式一致 */
    </style>
</head>
<body>
    <header>
        <h1>Friendship Talks</h1>
        <nav>
            <ul>
                <!-- 导航链接 -->
            </ul>
        </nav>
    </header>
    <div class="container">
        <section id="forum-section" class="module">
            <h2>论坛功能</h2>
            <div id="forum-posts">
                <!-- 帖子列表区域 -->
            </div>
            <form id="forum-post-form">
                <input type="text" id="post-title" placeholder="话题标题">
                <textarea id="post-content" placeholder="话题内容"></textarea>
                <input type="file" id="post-image">
                <button type="submit">发布话题</button>
            </form>
        </section>
    </div>

    <script>
        // 检查 localStorage 是否支持
        if (!window.localStorage) {
            alert('您的浏览器不支持本地存储功能，请升级浏览器或者使用其他浏览器！');
        }

        // 初始化帖子数据
        let forumPosts = JSON.parse(localStorage.getItem('forumPosts')) || [];

        // 在页面加载后渲染帖子
        document.addEventListener('DOMContentLoaded', function() {
            renderForumPosts();
        });

        // 添加论坛话题事件
        document.getElementById('forum-post-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const title = document.getElementById('post-title').value.trim();
            const content = document.getElementById('post-content').value.trim();
            const imageFile = document.getElementById('post-image').files[0];

            if (title !== '' && content !== '') {
                addForumPost(title, content, 'Alice', imageFile); // 假设作者为 Alice
                document.getElementById('post-title').value = '';
                document.getElementById('post-content').value = '';
                document.getElementById('post-image').value = '';
            } else {
                alert('请输入话题标题和内容！');
            }
        });

        // 添加论坛话题
        function addForumPost(title, content, author, imageFile) {
            const post = { title, content, author, imageFile };
            forumPosts.push(post);
            localStorage.setItem('forumPosts', JSON.stringify(forumPosts));
            renderForumPosts(); // 更新帖子列表
        }

        // 渲染帖子列表
        function renderForumPosts() {
            const forumPostsContainer = document.getElementById('forum-posts');
            forumPostsContainer.innerHTML = '';
            forumPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.classList.add('forum-post');
                postElement.innerHTML = `
                    <h3>${post.title}</h3>
                    <p>${post.content}</p>
                    <p>作者: ${post.author}</p>
                `;
                if (post.imageFile) {
                    const imgElement = document.createElement('img');
                    imgElement.src = URL.createObjectURL(post.imageFile);
                    imgElement.alt = '上传的图片';
                    postElement.appendChild(imgElement);
                }
                forumPostsContainer.appendChild(postElement);
            });
        }
    </script>
</body>
</html>


